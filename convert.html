<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAkFBMVEX/2AAAAAAAWL//1wAAWb7/2AAAV74AWL//1wD/1wD/1gEAV78AVrwAV74AWLf/1wAAULf/zwBQjdMAWL8AWL3/1gL/1gAAWL7/////1wAAWL+fweff6vf/2AFgl9eQtuOArN8gbcbv9fvP4PO/1e/A1e6wy+tAgs4wd8qAq95Agc4hbcevyup/q99QjNMQYsKbUGedAAAAF3RSTlP+AM9Q7+/v39/QgG9QTyAgEBD+f39wcDwlhIgAAAFVSURBVDjLfZMHkoMwDEUFpPdss1YmlFSSbLn/7VaSwYYhGw1jof+fLXkYIIqizVs8INMKV8TzFZsMLNklUakx3QuZ8UKAhd8VwkvLCFbjvkd+w2gD87CfegzRK8SuOXnXc2rE0JIDEsoRdM3+NKDZauQ3p95yVysBuh/ryEX7biqlG+BQXIsUMTPmBXGfF8UhAEYAy1yFeOZ2iJV07QGaTsYcEekf4KIpR7xQH0itPe8RS2NKTl/WpgJQADT2mWhVWpeda56yQibQyHjYK9+CFFBMmx+5ueD3FNPfegai1pB3xKNx42X04Bbq/GgDyzutH9K3oBIxpZIblO1rPvuY1AD00HMqtCRyyecAPG0x6MudV4iD5sehMFYMM9h98hMCZGFBE3zAdqgi6OoIzlCjkzVEiRYhOmUiP28y4aOg8XZynKwsDZNIgGj9PmWjc4K409mWzT9YuFsY0eqysgAAAABJRU5ErkJggg==">
    <link rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAWlBMVEUAV74AWb4AAAD/1wD/1gAAWL7/1wD/2AAAVr2BrN8RYsMAWL7/1wDA1u+Aq9////9gl9fv9fvf6vdAgs4gbMfQ4POPtuNwodpQjNIwd8oQYsKgwOZQjdL/2AHD4Ph0AAAAC3RSTlP+zwD+z19fUE/+/jTHYuwAAACNSURBVBjTNU4JDsMgDDNsPbYASYGe2/7/zaVpsUR8EEuBHx2ICHRO13l0UBBaNMKpVQBXYutm7f+iXWSrRMcmsls/TTHnd81TnJJtpEgHy5crxTvIsnApvJb5dTbOCi9EK89WAbQSI+GTW0WDwkW4Iia7xlIbTZttBHdxg8MQHiGEnz4TPXz/VHHjOfg/dVwKoX8yySYAAAAASUVORK5CYII=">
    <title>Транслітерація кирилиці в латиницю</title>
<style>
:root { color-scheme: light dark; }
noscript {
    position: absolute;
    left: 4em;
    padding: 1em;
    border-radius: 0.35em;
    color: #fff;
    background-color: #f0f;
}
nav.s {
    display: flex;
    flex-flow: row nowrap;
    justify-content: space-between;
}
nav.s ul {
    display: flex;
    flex-flow: column nowrap;
    align-items: flex-end;
}
ul {
  list-style: none;
}
#tin {
    margin: 1em 0 1em 0;
}
.c {
    display: flex;
    flex-flow: column nowrap;
}
@media screen and (width > 40em) {
    .c { flex-flow: row wrap; }
    .c > .p { margin: 0.5em; }
    body > div { max-width: 80rem; margin: auto; }
}
.c > .p {
    flex: 1;
    display: flex;
    flex-flow: column nowrap;
}
label {
    font-size: smaller;
}
textarea {
    min-height: 14rem;
}
</style>
</head>
<body class="notranslit">
<noscript>This page requires JavaScript</noscript>

<div>
<h1>
    Транслітерація кирилиці в латиницю
</h1>

<nav class="s">
    <span style="max-width: 100%;">
    <a href="https://ukrainewar.carrd.co/" rel="nofollow"><img src="img/ua.svg" alt="standwithukraine"></a>
    &nbsp;
    <a href="donate.html"><img src="img/donate.svg" alt="donate"></a>
    </span>
    <ul>
    <li>[<a href="en/convert.html">English</a>]</li>
    <li>[<a href="index.html">До браузерів</a>]</li>
    <li>[<a href="https://paiv.github.io/latynka-keyboard/" target="_blank">Клавіатури</a>]</li>
    <li>[<a href="https://paiv.github.io/uklatn/" target="_blank">Софт</a>]</li>
    </ul>
</nav>

<form>
<select name="tid">
<optgroup label="National standards"></optgroup>
<optgroup label="Misc other"></optgroup>
</select>
<div id="tin"></div>
</form>
<div class="c">
<div class="p">
<label for="in">Текст кирилицею</label>
<textarea id="in" lang="uk" placeholder="доброго вечора"></textarea>
</div>
<div class="p">
<label for="out">Транслітерація</label>
<textarea id="out" readonly="readonly"></textarea>
</div>
</div>

</div>

<script src="js/uklatn.js" type="module"></script>
<script type="module">
import * as uklatn from "./js/uklatn.js";
class DomBuilder {
    static el(name, classes) {
        const x = document.createElement(name)
        if (classes) classes.forEach((c) => x.classList.add(c))
        return x
    }

    static text(value) {
        return document.createTextNode(value)
    }

    static resetChildren(parent, ...children) {
        let last;
        while (last = parent.lastElementChild) {
            parent.removeChild(last)
        }
        for (const child of children) {
            parent.appendChild(child)
        }
    }
}


class RegexBuilder {
    constructor(op, args) {
        this.op = op
        this.args = args && args.filter((a) => typeof a === 'string' || !a.is_none())
    }

    regex(flags) {
        return new RegExp(this.toString(), flags)
    }

    toString() {
        switch (this.op) {
            case 'NONE':
                return null
            case 'CAPT_GROUP':
                return ['(', ...this.args, ')'].join('')
            case 'CAPT_OR_GROUP':
                return ['(', this.args.join('|'), ')'].join('')
            case 'NONCAPT_GROUP':
                return ['(?:', ...this.args, ')'].join('')
            case 'AND':
                return this.args.join('')
            case 'OR':
                return ['(?:', this.args.join('|'), ')'].join('')
            case 'CHARS':
                return ['[', this._pack_ranges(this.args.join('')), ']'].join('')
            case 'XCHARS':
                return ['[^', this._pack_ranges(this.args.join('')), ']'].join('')
            case 'OPT':
                switch (this.args.length) {
                    case 0:
                        return ''
                    case 1:
                        if (this.args[0] instanceof RegexBuilder) {
                            return (this.args.join('') + '?')
                        }
                        if (typeof this.args[0] === 'string') {
                            switch (this.args[0].length) {
                                case 0:
                                    return ''
                                case 1:
                                    return (this.args.join('') + '?')
                                default:
                                    break
                            }
                        }
                        // fall through
                    default:
                        return ['(?:', ...this.args, ')?'].join('')
                }
        }
    }

    _pack_ranges(s) {
        const xs = [...(new Set(s))]
        xs.sort()
        let res = ''
        let state = 0
        xs.forEach((c, i) => {
            switch (state) {
                case 0:
                    res += c
                    state = 1
                    break
                case 1:
                    if (c.charCodeAt(0) - xs[i-1].charCodeAt(0) !== 1) {
                        res += c
                    }
                    else {
                        state = 2
                    }
                    break
                case 2:
                    if (c.charCodeAt(0) - xs[i-1].charCodeAt(0) !== 1) {
                        if (xs[i-1].charCodeAt(0) - res.charCodeAt(res.length-1) > 1) {
                            res += '-'
                        }
                        res += xs[i-1]
                        res += c
                        state = 1
                    }
                    break
            }
        })
        if (state === 2) {
            if (xs[xs.length-1].charCodeAt(0) - res.charCodeAt(res.length-1) > 1) {
                res += '-'
            }
            res += xs[xs.length-1]
        }
        return res
    }

    none() {
        return new RegexBuilder('NONE')
    }

    is_none() {
        return this.op === 'NONE'
    }

    group() {
        return new RegexBuilder('CAPT_GROUP', [...arguments])
    }

    orgroup() {
        return new RegexBuilder('CAPT_OR_GROUP', [...arguments])
    }

    ngroup() {
        return new RegexBuilder('NONCAPT_GROUP', [...arguments])
    }

    and() {
        return new RegexBuilder('AND', [...arguments])
    }

    or() {
        return new RegexBuilder('OR', [...arguments])
    }

    chars() {
        return new RegexBuilder('CHARS', [...arguments])
    }

    xchars() {
        return new RegexBuilder('XCHARS', [...arguments])
    }

    optional() {
        return new RegexBuilder('OPT', [...arguments])
    }
}


class Markdown {
    constructor(dom) {
        this.dom = dom || Dom
    }

    render(md) {
        const pane = this.dom.el('div')

        if (!md) {
            return pane
        }

        let state = 0
        let so = []
        let link_start = -1
        let href_start = -1
        let link_title = undefined
        let link_href = undefined
        let nodes = []

        for (let char of md) {
            switch (state) {

                case 0:
                    if (char === '\n') {
                        const s = so.join('')
                        so = []
                        if (s) {
                            nodes.push(this.dom.text(s))
                        }
                        state = 1
                    }
                    else if (char === '[') {
                        link_start = so.length
                        so.push(char)
                        state = 2
                    }
                    else {
                        so.push(char)
                    }
                    break

                case 1:
                    if (char === '\n') {
                        let para = this.dom.el('p')
                        for (let node of nodes) {
                            para.appendChild(node)
                        }
                        pane.appendChild(para)
                        nodes = []
                        state = 0
                    }
                    else {
                        nodes.push(this.dom.el('br'))

                        if (char === '[') {
                            link_start = so.length
                            so.push(char)
                            state = 2
                        }
                        else {
                            so.push(char)
                            state = 0
                        }
                    }
                    break

                case 2:
                    if (char === ']') {
                        link_title = so.slice(link_start + 1).join('')
                        state = 3
                    }
                    so.push(char)
                    break

                case 3:
                    if (char === '(') {
                        href_start = so.length
                        state = 4
                    }
                    else {
                        state = 0
                    }
                    so.push(char)
                    break

                case 4:
                    if (char === ')') {
                        if (link_start > 0) {
                            const s = so.slice(0, link_start).join('')
                            nodes.push(this.dom.text(s))
                        }

                        const url = so.slice(href_start + 1).join('')
                        const link = this.dom.el('a')
                        link.href = url
                        link.target = '_blank'
                        link.appendChild(this.dom.text(link_title))
                        nodes.push(link)

                        so = []
                        state = 0
                    }
                    else {
                        so.push(char)
                    }
                    break
            }
        }

        const s = so.join('')
        if (s) {
            nodes.push(this.dom.text(s))
        }

        if (pane.hasChildNodes()) {
            if (nodes.length > 0) {
                const para = this.dom.el('p')
                for (let node of nodes) {
                    para.appendChild(node)
                }
                pane.appendChild(para)
            }
        }
        else {
            for (let node of nodes) {
                pane.appendChild(node)
            }
        }

        return pane
    }
}

class Transliterator {
    constructor(rules) {
        this.compiled = Transliterator.compileTable(rules)
    }

    static compileTable(rules) {
        const loabc = 'абвгґдеєжзиіїйклмнопрстуфхцчшщьюя'
        const consonants = 'бвгґджзйклмнпрстфхцчшщ'
        const vowels = 'аеєиіїоуюя'

        const hiabc = loabc.toLocaleUpperCase()
        const apos = ['\'', '\u2019', '\u02BC']

        const default_rules = {}
        const word_start_rules = {}
        const after_cons_rules = {}

        function casesOf(s) {
            function* inner(acc, xs, i) {
                if (i >= xs.length) {
                    yield acc
                    return
                }
                const x = xs[i]
                const y = x.toLocaleUpperCase()
                yield* inner(acc + x, xs, i + 1)
                if (y !== x) {
                    yield* inner(acc + y, xs, i + 1)
                }
            }
            const lo = [...s.toLocaleLowerCase()]
            return [...inner('', lo, 0)]
        }

        function TitleCase(value) {
            return value.toLocaleLowerCase()
                .replace(/^./, (s) => s.toLocaleUpperCase())
        }

        function SillyCase(value) {
            return value.toLocaleLowerCase()
                .replace(/.$/, (s) => s.toLocaleUpperCase())
        }

        function isUpper(s) {
            return s !== s.toLocaleLowerCase()
        }

        function matchCaseOf(k, s) {
            if (isUpper(k[0])) {
                return TitleCase(s)
            }
            else if (isUpper(k[k.length-1])) {
                return SillyCase(s)
            }
            return s.toLocaleLowerCase()
        }


        Object.keys(rules).forEach((key) => {
            let rule = rules[key]

            if (rule == null) {
                rule = ''
            }

            if (typeof rule === 'object') {

                if ('start' in rule) {
                    const value = rule.start || ''
                    casesOf(key).forEach((k) => {
                        word_start_rules[k] = matchCaseOf(k, value)
                    })
                }

                if ('cons' in rule) {
                    const value = rule.cons || ''
                    casesOf(key).forEach((k) => {
                        after_cons_rules[k] = matchCaseOf(k, value)
                    })
                }

                const value = rule.other || ''
                casesOf(key).forEach((k) => {
                    default_rules[k] = matchCaseOf(k, value)
                })
            }
            else {
                if (key.indexOf('\'') >= 0) {
                    apos.forEach((c) => {
                        const newkey = key.replace('\'', c)
                        casesOf(newkey).forEach((k) => {
                            default_rules[k] = matchCaseOf(k, rule)
                        })
                    })
                }
                else {
                    casesOf(key).forEach((k) => {
                        default_rules[k] = matchCaseOf(k, rule)
                    })
                }
            }
        })


        const keys1 = Object.keys(default_rules).filter((key) => key.length === 1)
        const default_keyset1 = [...new Set(
            keys1.map((x) => x.toLocaleLowerCase())
        )]

        const keys2 = Object.keys(default_rules).filter((key) => key.length > 1)
        const default_keyset2 = [...new Set(
            keys2.map((s) => s.toLocaleLowerCase())
        )].sort((a,b) => b.length - a.length)

        const word_start_keyset = [...new Set(
            Object.keys(word_start_rules).map((s) => s.toLocaleLowerCase())
        )].sort((a,b) => b.length - a.length)

        const consonants_keyset = consonants
        const after_cons_keyset = [...new Set(
            Object.keys(after_cons_rules).map((x) => x.toLocaleLowerCase())
        )].sort((a,b) => b.length - a.length)


        const rxb = new RegexBuilder()
        const noop = '\uFFFC\uFFFC'

        const rx = rxb.or(
            // word start
            rxb.ngroup(
                // char preceding
                rxb.orgroup(  // 1
                    '^',
                    rxb.and(
                        rxb.xchars(loabc, ...apos),
                        rxb.optional(rxb.chars(...apos))
                    )
                ),
                // char to translate
                rxb.orgroup(  // 2
                    ...(word_start_keyset.length > 0 ? word_start_keyset : [noop])
                )
            ),
            // or word inner
            rxb.or(
                rxb.orgroup(  // 3
                    ...(default_keyset2.length > 0 ? default_keyset2 : [noop])
                ),
                rxb.group(  // 4
                    ...(after_cons_keyset.length > 0 ?
                        [rxb.chars(consonants_keyset), rxb.or(...after_cons_keyset)]
                        : [noop])
                ),
                rxb.orgroup(  // 5
                    rxb.chars(...default_keyset1)
                )
            )
        )
        .regex('gi')

        const cb = (text, prefix, match_start, match_pairs, match_cons, match_inner) => {
            if (match_start) {
                const value = word_start_rules[match_start]
                return prefix + value
            }

            if (match_pairs) {
                const value = default_rules[match_pairs]
                return value
            }

            if (match_cons) {
                const cons = default_rules[match_cons[0]]
                const value = after_cons_rules[match_cons.substring(1)]
                return cons + value
            }

            const value = default_rules[match_inner]
            return value
        }
        return {
            regex: rx,
            callback: cb,
        }
    }

    convert(text) {
        return text
            .normalize('NFC')
            .replace(this.compiled.regex, this.compiled.callback)
            .normalize('NFC')
    }

    processTextNodes(nodes) {
        nodes.forEach((node) => {
            const text = node.data || ''
            node.data = this.convert(text)
        })
    }
}

const BundledTables =
{"abecadlo":{"id":"abecadlo","title":"Abecadło Лозинського 1834","description":"[wikipedia.org](https://uk.wikipedia.org/wiki/%D0%90%D0%B1%D0%B5%D1%86%D0%B0%D0%B4%D0%BB%D0%BE)","rules":{"а":"a","б":"b","в":"w","г":"h","ґ":"g","д":"d","дь":"ď","е":"e","є":{"cons":"ie","other":"je"},"ж":"ż","з":"z","зь":"ź","и":"y","і":"i","ї":"ji","й":"j","к":"k","л":"ł","лє":"le","лі":"li","ль":"l","лю":"lu","ля":"la","ллє":"lle","ллі":"lli","лль":"ll","ллю":"llu","лля":"lla","м":"m","н":"n","нь":"ń","о":"o","п":"p","р":"r","рь":"ŕ","с":"s","сь":"ś","т":"t","ть":"ť","у":"u","ф":"f","х":"ch","ц":"c","ць":"ć","ч":"cz","ш":"sz","щ":"szcz","ь":"","ю":{"cons":"iu","other":"ju"},"я":{"cons":"ia","other":"ja"},"'":""}},"bgn_1965":{"id":"bgn_1965","title":"BGN/PCGN 1965","description":"[wikipedia.org](https://en.wikipedia.org/wiki/BGN/PCGN_romanization)","rules":{"а":"a","б":"b","в":"v","г":"h","ґ":"g","д":"d","е":"e","є":"ye","ж":"zh","з":"z","и":"y","і":"i","ї":"yi","й":"y","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"ts","ч":"ch","ш":"sh","щ":"shch","ь":"'","ю":"yu","я":"ya","'":"\"","зг":"z·h","кг":"k·h","сг":"s·h","тс":"t·s","тсг":"ts·h"}},"bgn_2019":{"id":"bgn_2019","title":"BGN/PCGN 2019","description":"[wikipedia.org](https://en.wikipedia.org/wiki/BGN/PCGN_romanization)","rules":{"а":"a","б":"b","в":"v","г":"h","ґ":"g","д":"d","е":"e","є":{"start":"ye","other":"ie"},"ж":"zh","з":"z","и":"y","і":"i","ї":{"start":"yi","other":"i"},"й":{"start":"y","other":"i"},"к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"ts","ч":"ch","ш":"sh","щ":"shch","ь":"","ю":{"start":"yu","other":"iu"},"я":{"start":"ya","other":"ia"},"'":"","зг":"zgh"}},"dotted":{"id":"dotted","title":"Крапкова","description":"","rules":{"а":"a","б":"b","бь":"ḅ","бє":"ḅe","бю":"ḅu","бя":"ḅa","в":"v","вь":"ṿ","вє":"ṿe","вю":"ṿu","вя":"ṿa","г":"h","гь":"ḥ","гє":"ḥe","гю":"ḥu","гя":"ḥa","ґ":"g","д":"d","дь":"ḍ","дє":"ḍe","дю":"ḍu","дя":"ḍa","е":"e","є":{"cons":"̣e","other":"je"},"ж":"ż","з":"z","зь":"ẓ","зє":"ẓe","зю":"ẓu","зя":"ẓa","и":"y","і":"i","ї":"ï","й":"j","йє":"jje","йю":"jju","йя":"jja","к":"k","кь":"ḳ","кє":"ḳe","кю":"ḳu","кя":"ḳa","л":"l","ль":"ḷ","лє":"ḷe","лю":"ḷu","ля":"ḷa","м":"m","мь":"ṃ","мє":"ṃe","мю":"ṃu","мя":"ṃa","н":"n","нь":"ṇ","нє":"ṇe","ню":"ṇu","ня":"ṇa","о":"o","п":"p","р":"r","рь":"ṛ","рє":"ṛe","рю":"ṛu","ря":"ṛa","с":"s","сь":"ṣ","сє":"ṣe","сю":"ṣu","ся":"ṣa","т":"t","ть":"ṭ","тє":"ṭe","тю":"ṭu","тя":"ṭa","у":"u","ф":"f","х":"x","ц":"c","ч":"ċ","ш":"ṡ","щ":"ṡċ","ь":"̣","ю":{"cons":"̣u","other":"ju"},"я":{"cons":"̣a","other":"ja"},"'":""}},"dstu_diac":{"id":"dstu_diac","title":"ДСТУ 9112:2021, Система А","description":"[zakon.rada.gov.ua](https://zakon.rada.gov.ua/rada/show/v0260774-21)","rules":{"а":"a","б":"b","в":"v","г":"ğ","ґ":"g","д":"d","е":"e","є":"je","ж":"ž","з":"z","и":"y","і":"i","ї":"ï","й":{"cons":"'j","other":"j"},"йа":{"cons":"j'a","other":"j'a"},"йе":{"cons":"j'e","other":"j'e"},"йу":{"cons":"j'u","other":"j'u"},"к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"x","ц":"c","ч":"č","ш":"š","щ":"ŝ","ь":{"cons":"j","other":"ĵ"},"ьа":{"cons":"j'a","other":"j'a"},"ье":{"cons":"j'e","other":"j'e"},"ьу":{"cons":"j'u","other":"j'u"},"ю":"ju","я":"ja","'":"'"}},"dstu_intl":{"id":"dstu_intl","title":"ДСТУ 9112:2021, Система Б","description":"[zakon.rada.gov.ua](https://zakon.rada.gov.ua/rada/show/v0260774-21)","rules":{"а":"a","б":"b","в":"v","г":"gh","ґ":"g","д":"d","е":"e","є":"je","ж":"zh","з":"z","и":"y","і":"i","ї":"ji","й":{"cons":"'j","other":"j"},"йа":{"cons":"j'a","other":"j'a"},"йе":{"cons":"j'e","other":"j'e"},"йі":{"cons":"j'i","other":"j'i"},"йу":{"cons":"j'u","other":"j'u"},"к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"c","ч":"ch","ш":"sh","шч":"sh'ch","щ":"shch","ь":{"cons":"j","other":"hj"},"ьа":{"cons":"j'a","other":"j'a"},"ье":{"cons":"j'e","other":"j'e"},"ьі":{"cons":"j'i","other":"j'i"},"ьу":{"cons":"j'u","other":"j'u"},"ю":"ju","я":"ja","'":"'"}},"etypical":{"id":"etypical","title":"Etypical 2020","description":"paiv","rules":{"а":"a","б":"b","в":"w","г":"ğ","гь":"ǵ","гьо":"ğio","ґ":"g","ґь":"ǵ","ґьо":"gio","д":"d","е":"e","є":{"cons":"ie","other":"je"},"ж":"ż","жє":"że","жь":"ż","жю":"żu","жя":"ża","з":"z","зь":"ź","зьо":"zio","и":"y","і":"i","ї":"ji","й":"j","йа":"j'a","йе":"j'e","йє":"jje","йі":"j'i","йу":"j'u","йю":"jju","йя":"jja","к":"k","кь":"ḱ","л":"l","ль":"ĺ","льо":"lio","м":"m","мь":"ḿ","мьо":"mio","н":"n","нь":"ń","ньо":"nio","о":"o","п":"p","пь":"ṕ","пьо":"pio","р":"r","рь":"ŕ","рьо":"rio","с":"s","сз":"s'z","сь":"ś","сьо":"sio","т":"t","ться":"tsia","у":"u","ф":"f","х":"ch","ц":"c","цз":"c'z","ць":"ć","цьо":"cio","ч":"cz","чє":"cze","чь":"cz","чю":"czu","чя":"cza","ш":"sz","шч":"sz'cz","шчь":"sz'cz","шє":"sze","шь":"sz","шю":"szu","шя":"sza","щ":"szcz","щє":"szcze","щь":"szcz","щю":"szczu","щя":"szcza","ь":"́","ьа":"́'a","ье":"́'e","ьо":"io","ьі":"́'i","ьу":"́'u","ю":{"cons":"iu","other":"ju"},"я":{"cons":"ia","other":"ja"},"'":""}},"gost779b":{"id":"gost779b","title":"GOST 7.79 System B","description":"[wikipedia.org](https://en.wikipedia.org/wiki/ISO_9)","rules":{"а":"a","б":"b","в":"v","г":"g","ґ":"g̀","д":"d","е":"e","є":"ye","ж":"zh","з":"z","и":"ỳ","і":"i","ї":"yi","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"x","ц":"cz","ці":"ci","ци":"cỳ","цє":"cye","цю":"cyu","ця":"cya","ч":"ch","ш":"sh","щ":"shh","ь":"̀","ю":"yu","я":"ya","'":"'"}},"iso9_1968":{"id":"iso9_1968","title":"Наукова транслітерація 1968","description":"ISO/R 9:1968 [wikipedia.org](https://en.wikipedia.org/wiki/ISO_9#ISO/R_9)","rules":{"а":"a","б":"b","в":"v","г":"h","ґ":"g","д":"d","е":"e","є":"je","ж":"ž","з":"z","и":"y","і":"i","ї":"ï","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"ch","ц":"c","ч":"č","ш":"š","щ":"šč","ь":"ʹ","ю":"ju","я":"ja","'":"″"}},"iso9_1995":{"id":"iso9_1995","title":"ISO 9:1995, GOST 7.79 System A","description":"[wikipedia.org](https://en.wikipedia.org/wiki/ISO_9)","rules":{"а":"a","б":"b","в":"v","г":"g","ґ":"g̀","д":"d","е":"e","є":"ê","ж":"ž","з":"z","и":"i","і":"ì","ї":"ï","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"č","ш":"š","щ":"ŝ","ь":"ʹ","ю":"û","я":"â","'":"ʼ"}},"jirecek":{"id":"jirecek","title":"Їречківка 1859","description":"[latynka.tak.today](http://latynka.tak.today/works/proekt-jirecheka/)","rules":{"а":"a","б":"b","в":"v","г":"h","ґ":"g","д":"d","дє":"ďe","дь":"ď","дю":"ďu","дя":"ďa","е":"e","є":"je","ж":"ž","з":"z","зє":"źe","зь":"ź","зю":"źu","зя":"źa","и":"y","і":"i","ї":"ji","й":"j","к":"k","л":"l","лє":"ľe","ль":"ľ","лю":"ľu","ля":"ľa","м":"m","н":"n","нє":"ńe","нь":"ń","ню":"ńu","ня":"ńa","о":"o","п":"p","р":"r","рє":"ŕe","рь":"ŕ","рю":"ŕu","ря":"ŕa","с":"s","сє":"śe","сь":"ś","сю":"śu","ся":"śa","т":"t","тє":"ťe","ть":"ť","тю":"ťu","тя":"ťa","у":"u","ф":"f","х":"ch","ц":"c","цє":"će","ць":"ć","цю":"ću","ця":"ća","ч":"č","ш":"š","щ":"šč","ь":"","ю":"ju","я":"ja","'":""}},"kmu_2010":{"id":"kmu_2010","title":"Official КМУ 2010","description":"[zakon.rada.gov.ua](https://zakon.rada.gov.ua/laws/show/55-2010-%D0%BF)","rules":{"а":"a","б":"b","в":"v","г":"h","ґ":"g","д":"d","е":"e","є":{"start":"ye","other":"ie"},"ж":"zh","з":"z","и":"y","і":"i","ї":{"start":"yi","other":"i"},"й":{"start":"y","other":"i"},"к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"ts","ч":"ch","ш":"sh","щ":"shch","ь":"","ю":{"start":"yu","other":"iu"},"я":{"start":"ya","other":"ia"},"'":"","зг":"zgh"}},"kolomyjec":{"id":"kolomyjec","title":"Авенір Коломиєць 1946","description":"[zbruc.eu](https://zbruc.eu/node/103627)","rules":{"а":"a","б":"b","в":"v","г":"h","ґ":"g","д":"d","дж":"ḑ","джє":"ḑe","джю":"ḑu","джя":"ḑa","дз":"q","ддє":"d́d́e","дді":"d́di","ддь":"d́d́","ддю":"d́d́u","ддя":"d́d́a","е":"e","є":{"cons":"́e","other":"je"},"ж":"ȥ","жє":"ȥe","жю":"ȥu","жя":"ȥa","з":"z","зє":"źe","зь":"ź","зю":"źu","зя":"źa","ззє":"źźe","ззі":"źzi","ззь":"źź","ззю":"źźu","ззя":"źźa","и":"y","і":"i","ї":"ji","й":"j","йє":"jje","йю":"jju","йя":"jja","к":"k","л":"l","лє":"ĺe","ль":"ĺ","лю":"ĺu","ля":"ĺa","ллє":"ĺĺe","ллі":"ĺli","лль":"ĺĺ","ллю":"ĺĺu","лля":"ĺĺa","м":"m","н":"n","нє":"ńe","нь":"ń","ню":"ńu","ня":"ńa","ннє":"ńńe","нні":"ńni","ннь":"ńń","нню":"ńńu","ння":"ńńa","о":"o","п":"p","р":"r","рє":"ŕe","рь":"ŕ","рю":"ŕu","ря":"ŕa","с":"s","сє":"śe","сь":"ś","сю":"śu","ся":"śa","ссє":"śśe","ссі":"śsi","ссь":"śś","ссю":"śśu","сся":"śśa","т":"t","ттє":"t́t́e","тті":"t́ti","тть":"t́t́","ттю":"t́t́u","ття":"t́t́a","ться":"ćća","у":"u","ф":"f","х":"x","ц":"c","цє":"će","ць":"ć","цю":"ću","ця":"ća","ццє":"ćće","цці":"ćci","цць":"ćć","ццю":"ćću","цця":"ćća","ч":"ç","чє":"çe","чю":"çu","чя":"ça","ш":"ş","шє":"şe","шю":"şu","шя":"şa","щ":"şç","ь":"́","ю":{"cons":"́u","other":"ju"},"я":{"cons":"́a","other":"ja"},"'":""}},"lahoda":{"id":"lahoda","title":"Lahoda 2008","description":"[omniglot.com](https://www.omniglot.com/pdfs/latynka.pdf)","rules":{"а":"a","б":"b","в":"v","вв":"w","г":"h","ґ":"g","д":"d","дє":"ďe","дь":"ď","дю":"ďu","дя":"ďa","дьє":"ďie","дьйо":"ďio","дью":"ďiu","дья":"ďia","е":"e","є":{"cons":"ie","other":"je"},"ж":"ž","з":"z","зє":"źe","зь":"ź","зю":"źu","зя":"źa","зьє":"źie","зьйо":"źio","зью":"źiu","зья":"źia","и":"y","ий":"ý","і":"i","іа":"ía","іе":"íe","іу":"íu","ї":"ji","й":"j","к":"k","л":"l","лє":"ľe","ль":"ľ","лю":"ľu","ля":"ľa","льє":"ľie","льйо":"ľio","лью":"ľiu","лья":"ľia","м":"m","н":"n","нє":"ńe","нь":"ń","ню":"ńu","ня":"ńa","ньє":"ńie","ньйо":"ńio","нью":"ńiu","нья":"ńia","о":"o","п":"p","р":"r","рє":"ŕe","р'є":"rie","рйо":"rio","рь":"ŕ","рю":"ŕu","ря":"ŕa","с":"s","сє":"śe","сь":"ś","сю":"śu","ся":"śa","сьє":"śie","сьйо":"śio","сью":"śiu","сья":"śia","т":"t","тє":"ťe","ть":"ť","тю":"ťu","тя":"ťa","тьє":"ťie","тьйо":"ťio","тью":"ťiu","тья":"ťia","у":"u","ф":"f","х":"ch","ц":"c","цє":"će","ць":"ć","цю":"ću","ця":"ća","цьє":"ćie","цьйо":"ćio","цью":"ćiu","цья":"ćia","ч":"č","ш":"š","щ":"šč","ь":"","ю":{"cons":"iu","other":"ju"},"я":{"cons":"ia","other":"ja"},"'":""}},"lucuk":{"id":"lucuk","title":"Лучуківка 2000","description":"[pravopys.pdf](http://www.vntl.com/im/pdf/pravopys.pdf)","rules":{"а":"a","б":"b","в":"v","г":"h","ґ":"g","д":"d","дє":"ďe","дь":"ď","дю":"ďu","дя":"ďa","е":"e","є":"je","ж":"ž","з":"z","зє":"źe","зь":"ź","зю":"źu","зя":"źa","и":"y","і":"i","ї":"ji","й":"j","к":"k","л":"l","лє":"ľe","ль":"ľ","лю":"ľu","ля":"ľa","м":"m","н":"n","нє":"ńe","нь":"ń","ню":"ńu","ня":"ńa","о":"o","п":"p","р":"r","рє":"ŕe","рь":"ŕ","рю":"ŕu","ря":"ŕa","с":"s","сє":"śe","сь":"ś","сю":"śu","ся":"śa","т":"t","тє":"ťe","ть":"ť","тю":"ťu","тя":"ťa","у":"u","ф":"f","х":"x","ц":"c","цє":"će","ць":"ć","цю":"ću","ця":"ća","ч":"č","ш":"š","щ":"šč","ь":"","ю":"ju","я":"ja","'":""}},"melnyk":{"id":"melnyk","title":"Meĺnyk 2008","description":"[archive.org](http://web.archive.org/web/20090901072239/http://www.latynka.com/pravopys/)","rules":{"а":"a","б":"b","в":"v","г":"h","ґ":"g","д":"d","дь":"ď","дьо":"dio","е":"e","є":{"cons":"ie","other":"je"},"ж":"ž","з":"z","зь":"ź","зьо":"zio","и":"y","ий":"ý","иє":"ýe","иї":"ýi","ию":"ýu","ия":"ýa","і":"i","ї":"ji","й":"j","к":"k","л":"l","ль":"ĺ","льо":"lio","м":"m","н":"n","нь":"ń","ньо":"nio","о":"o","п":"p","р":"r","рь":"ŕ","рьо":"rio","с":"s","сь":"ś","сьо":"sio","т":"t","ть":"ť","тьо":"tio","у":"u","ф":"f","х":"ch","ц":"c","ць":"ć","цьо":"cio","ч":"č","ш":"š","щ":"šč","ь":"","ю":{"cons":"iu","other":"ju"},"я":{"cons":"ia","other":"ja"},"'":""}},"nachasi":{"id":"nachasi","title":"Na chasi 2017","description":"[nachasi.com](https://nachasi.com/ul/manifest/)","rules":{"а":"a","б":"b","в":"v","г":"g","ґ":"ğ","д":"d","дь":"ď","е":"e","є":"je","ж":"ž","з":"z","зь":"ź","и":"y","і":"i","ї":"ї","й":"j","к":"k","л":"l","ль":"ľ","м":"m","н":"n","нь":"ń","о":"o","п":"p","р":"r","рь":"ŕ","с":"s","сь":"ś","т":"t","ть":"ť","у":"u","ф":"f","х":"h","ц":"c","ць":"ć","ч":"č","ш":"š","щ":"šč","ь":"","ю":"ju","я":"ja","'":"'"}},"nova_latynka":{"id":"nova_latynka","title":"Nova Latynka","description":"[nova-latynka.livejournal.com](https://nova-latynka.livejournal.com/775.html)","rules":{"а":"a","б":"b","в":"v","г":"h","ґ":"g","д":"d","е":"e","є":"je","ж":"ž","з":"z","и":"y","і":"i","ї":"ji","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"x","ц":"c","ч":"č","ш":"š","щ":"šč","ь":"j","ю":"ju","я":"ja"}},"paiv":{"id":"paiv","title":"Avtorśka 2023","description":"paiv","rules":{"а":"a","б":"b","в":"v","г":"ğ","гє":"ǵe","гь":"ǵ","гю":"ǵu","гя":"ǵa","ґ":"g","ґє":"ǵe","ґь":"ǵ","ґю":"ǵu","ґя":"ǵa","д":"d","е":"e","є":{"cons":"́e","other":"je"},"ж":"ž","жє":"že","жь":"ž","жю":"žu","жя":"ža","з":"z","зє":"źe","зь":"ź","зю":"źu","зя":"źa","и":"y","і":"i","ї":{"cons":"ji","other":"ï"},"'ї":"ji","й":"j","йа":"j'a","йе":"j'e","йі":"j'i","йу":"j'u","йє":"jje","йю":"jju","йя":"jja","к":"k","кє":"ḱe","кь":"ḱ","кю":"ḱu","кя":"ḱa","л":"l","лє":"ĺe","ль":"ĺ","лю":"ĺu","ля":"ĺa","м":"m","мє":"ḿe","мь":"ḿ","мю":"ḿu","мя":"ḿa","н":"n","нє":"ńe","нь":"ń","ню":"ńu","ня":"ńa","о":"o","п":"p","пє":"ṕe","пь":"ṕ","пю":"ṕu","пя":"ṕa","р":"r","рє":"ŕe","рь":"ŕ","рю":"ŕu","ря":"ŕa","с":"s","сє":"śe","сь":"ś","сю":"śu","ся":"śa","т":"t","ться":"tśa","у":"u","ф":"f","х":"x","ц":"c","цє":"će","ць":"ć","цю":"ću","ця":"ća","ч":"č","чє":"če","чь":"č","чю":"ču","чя":"ča","ш":"š","шє":"še","шь":"š","шю":"šu","шя":"ša","шч":"š'č","шчє":"š'če","шчь":"š'č","шчю":"š'ču","шчя":"š'ča","щ":"šč","щє":"šče","щь":"šč","щю":"šču","щя":"šča","ь":"́","ьа":"́'a","ье":"́'e","ьї":"́ji","ьу":"́'u","ю":{"cons":"́u","other":"ju"},"я":{"cons":"́a","other":"ja"},"'":""}},"pseudo_jirecek":{"id":"pseudo_jirecek","title":"Псевдо-Їречківка","description":"[latynka.tak.today](http://latynka.tak.today/works/psevdojireckivka/)","rules":{"а":"a","б":"b","в":"v","г":"h","ґ":"g","д":"d","дь":"ď","дьо":"dio","е":"e","є":{"cons":"ie","other":"je"},"ж":"ž","з":"z","зь":"ź","зьо":"zio","и":"y","і":"i","ї":"ji","й":"j","к":"k","л":"l","ль":"ľ","льо":"lio","м":"m","н":"n","нь":"ń","ньо":"nio","о":"o","п":"p","р":"r","рь":"ŕ","рьо":"rio","с":"s","сь":"ś","сьо":"sio","т":"t","ть":"ť","тьо":"tio","у":"u","ф":"f","х":"ch","ц":"c","ць":"ć","цьо":"cio","ч":"č","ш":"š","щ":"šč","ь":"","ю":{"cons":"iu","other":"ju"},"я":{"cons":"ia","other":"ja"},"'":""}},"tkpn_combo":{"id":"tkpn_combo","title":"ТКПН Вакуленко 1994 combo","description":"[linguistics.kspu.edu](http://linguistics.kspu.edu/webfm_send/945)","rules":{"а":"a","б":"b","бйо":"b'jo","в":"v","вйо":"v'jo","г":"ğ","ґ":"g","д":"d","дйо":"d'jo","е":"e","є":"je","ж":"ž","з":"z","зйо":"z'jo","и":"y","і":"i","ї":"ï","й":"j","к":"k","л":"l","м":"m","мйо":"m'jo","н":"n","о":"o","п":"p","пйо":"p'jo","р":"r","рйо":"r'jo","с":"s","сйо":"s'jo","т":"t","у":"u","ф":"f","х":"x","ц":"c","ч":"č","ш":"š","щ":"ŝ","ь":"j","ю":"ju","я":"ja","'":"'"}},"tkpn_diac":{"id":"tkpn_diac","title":"ТКПН Вакуленко 1994 diac","description":"[linguistics.kspu.edu](http://linguistics.kspu.edu/webfm_send/945)","rules":{"а":"a","б":"b","бйо":"b'jo","в":"v","вйо":"v'jo","г":"ğ","ґ":"g","д":"d","дйо":"d'jo","е":"e","є":"ë","ж":"ž","з":"z","зйо":"z'jo","и":"y","і":"i","ї":"ï","й":"j","к":"k","л":"l","м":"m","мйо":"m'jo","н":"n","о":"o","п":"p","пйо":"p'jo","р":"r","рйо":"r'jo","с":"s","сйо":"s'jo","т":"t","у":"u","ф":"f","х":"x","ц":"c","ч":"č","ш":"š","щ":"ŝ","ь":"j","ю":"ü","я":"ä","'":"'"}},"tkpn_intl":{"id":"tkpn_intl","title":"ТКПН Вакуленко 1994 intl","description":"[linguistics.kspu.edu](http://linguistics.kspu.edu/webfm_send/945)","rules":{"а":"a","б":"b","бйо":"b'jo","в":"v","вйо":"v'jo","г":"gh","ґ":"g","д":"d","дйо":"d'jo","е":"e","є":"je","ж":"zh","з":"z","зйо":"z'jo","и":"y","і":"i","ї":"ji","й":"j","к":"k","л":"l","м":"m","мйо":"m'jo","н":"n","о":"o","п":"p","пйо":"p'jo","р":"r","рйо":"r'jo","с":"s","сйо":"s'jo","т":"t","у":"u","ф":"f","х":"kh","ц":"c","ч":"ch","ш":"sh","щ":"shh","ь":"j","ю":"ju","я":"ja","'":"'"}}}

const _AppState = {};
function onTableChange(select, info) {
    const table = BundledTables[select.value];
    const fo = new Markdown(DomBuilder).render(table.description || '');
    info.replaceChildren(fo);
    switch (table.id) {
        case 'dstu_diac':
            _AppState.tr = {convert: (s) => uklatn.encode(s, 'DSTU_9112_A')};
            break;
        case 'dstu_intl':
            _AppState.tr = {convert: (s) => uklatn.encode(s, 'DSTU_9112_B')};
            break;
        case 'kmu_2010':
            _AppState.tr = {convert: (s) => uklatn.encode(s, 'KMU_55')};
            break;
        default:
            _AppState.tr = new Transliterator(table.rules);
    }
}
function onInputChange(txt1, txt2) {
    txt2.value = _AppState.tr.convert(txt1.value);
}
function setupApp() {
    const top_tables = ['dstu_diac', 'dstu_intl', 'kmu_2010'];
    const info = document.querySelector('#tin');
    const form = document.querySelector('form');
    const select = form.querySelector('select');
    const [opt1, opt2] = select.querySelectorAll('optgroup');
    function addTable(key, group) {
        const table = BundledTables[key];
        const opt = document.createElement('option');
        opt.value = table.id;
        opt.text = table.title || table.id;
        group.append(opt);
    }
    for (const key of top_tables) {
        addTable(key, opt1);
    }
    const tkeys = Object.keys(BundledTables);
    function keysByTitle(a, b) {
        const t1 = (BundledTables[a] || {title: a}).title || a;
        const t2 = (BundledTables[b] || {title: b}).title || b;
        return t1.localeCompare(t2);
    }
    tkeys.sort(keysByTitle);
    for (const key of tkeys) {
        if (top_tables.indexOf(key) >= 0) {
            continue;
        }
        addTable(key, opt2);
    }
    onTableChange(select, info);
    const [txt1, txt2] = document.querySelectorAll('textarea');
    txt1.focus();
    form.addEventListener('submit', (e) => { e.preventDefault(); });
    select.addEventListener('change', () => { onTableChange(select, info); onInputChange(txt1, txt2); });
    txt1.addEventListener('input', () => { onInputChange(txt1, txt2); } );
}
window.addEventListener('DOMContentLoaded', setupApp);
</script>
</body>
</html>
